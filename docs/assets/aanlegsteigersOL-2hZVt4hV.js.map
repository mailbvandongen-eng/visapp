{"version":3,"file":"aanlegsteigersOL-2hZVt4hV.js","sources":["../../src/layers/aanlegsteigersOL.ts"],"sourcesContent":["import VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { VIS_LAYER_STYLES } from './iconStyles'\n\n// Overpass API query for marinas and moorings in Netherlands\nconst OVERPASS_QUERY = `\n[out:json][timeout:60];\narea[\"name\"=\"Nederland\"]->.nl;\n(\n  node[\"leisure\"=\"marina\"](area.nl);\n  node[\"mooring\"=\"yes\"](area.nl);\n  way[\"leisure\"=\"marina\"](area.nl);\n);\nout center tags;\n`\n\nexport async function createAanlegsteigersLayer(): Promise<VectorLayer<VectorSource>> {\n  const source = new VectorSource()\n\n  const layer = new VectorLayer({\n    source,\n    style: VIS_LAYER_STYLES.aanlegsteigers,\n    properties: {\n      title: 'Aanlegsteigers',\n      name: 'Aanlegsteigers'\n    }\n  })\n\n  // Fetch data from Overpass API\n  try {\n    const response = await fetch('https://overpass-api.de/api/interpreter', {\n      method: 'POST',\n      body: `data=${encodeURIComponent(OVERPASS_QUERY)}`\n    })\n\n    const data = await response.json()\n\n    // Convert to GeoJSON\n    const features = data.elements\n      .filter((el: any) => el.lat && el.lon || el.center)\n      .map((el: any) => {\n        const tags = el.tags || {}\n        return {\n          type: 'Feature',\n          geometry: {\n            type: 'Point',\n            coordinates: [\n              el.lon || el.center?.lon,\n              el.lat || el.center?.lat\n            ]\n          },\n          properties: {\n            layerType: 'aanlegsteiger',\n            id: el.id,\n            name: tags.name || null,\n            type: tags.leisure || tags.mooring || 'marina',\n            operator: tags.operator || null,\n            access: tags.access || null,\n            fee: tags.fee || null,\n            capacity: tags.capacity || null,\n            website: tags.website || tags['contact:website'] || null,\n            phone: tags.phone || tags['contact:phone'] || null\n          }\n        }\n      })\n\n    const geojson = {\n      type: 'FeatureCollection',\n      features\n    }\n\n    source.addFeatures(\n      new GeoJSON().readFeatures(geojson, {\n        featureProjection: 'EPSG:3857'\n      })\n    )\n\n    console.log(`Loaded ${features.length} aanlegsteigers`)\n  } catch (error) {\n    console.error('Failed to load aanlegsteigers:', error)\n  }\n\n  return layer\n}\n"],"names":["OVERPASS_QUERY","createAanlegsteigersLayer","source","VectorSource","layer","VectorLayer","VIS_LAYER_STYLES","features","el","tags","geojson","GeoJSON","error"],"mappings":"sIAMA,MAAMA,EAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWvB,eAAsBC,GAAgE,CACpF,MAAMC,EAAS,IAAIC,EAEbC,EAAQ,IAAIC,EAAY,CAC5B,OAAAH,EACA,MAAOI,EAAiB,eACxB,WAAY,CACV,MAAO,iBACP,KAAM,gBAAA,CACR,CACD,EAGD,GAAI,CASF,MAAMC,GAHO,MALI,MAAM,MAAM,0CAA2C,CACtE,OAAQ,OACR,KAAM,QAAQ,mBAAmBP,CAAc,CAAC,EAAA,CACjD,GAE2B,KAAA,GAGN,SACnB,OAAQQ,GAAYA,EAAG,KAAOA,EAAG,KAAOA,EAAG,MAAM,EACjD,IAAKA,GAAY,CAChB,MAAMC,EAAOD,EAAG,MAAQ,CAAA,EACxB,MAAO,CACL,KAAM,UACN,SAAU,CACR,KAAM,QACN,YAAa,CACXA,EAAG,KAAOA,EAAG,QAAQ,IACrBA,EAAG,KAAOA,EAAG,QAAQ,GAAA,CACvB,EAEF,WAAY,CACV,UAAW,gBACX,GAAIA,EAAG,GACP,KAAMC,EAAK,MAAQ,KACnB,KAAMA,EAAK,SAAWA,EAAK,SAAW,SACtC,SAAUA,EAAK,UAAY,KAC3B,OAAQA,EAAK,QAAU,KACvB,IAAKA,EAAK,KAAO,KACjB,SAAUA,EAAK,UAAY,KAC3B,QAASA,EAAK,SAAWA,EAAK,iBAAiB,GAAK,KACpD,MAAOA,EAAK,OAASA,EAAK,eAAe,GAAK,IAAA,CAChD,CAEJ,CAAC,EAEGC,EAAU,CACd,KAAM,oBACN,SAAAH,CAAA,EAGFL,EAAO,YACL,IAAIS,EAAA,EAAU,aAAaD,EAAS,CAClC,kBAAmB,WAAA,CACpB,CAAA,EAGH,QAAQ,IAAI,UAAUH,EAAS,MAAM,iBAAiB,CACxD,OAASK,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CACvD,CAEA,OAAOR,CACT"}