{"version":3,"file":"boothellingenOL-nKCGUMxN.js","sources":["../../src/layers/boothellingenOL.ts"],"sourcesContent":["import VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { VIS_LAYER_STYLES } from './iconStyles'\n\n// Overpass API query for slipways (trailer ramps) in Netherlands\nconst OVERPASS_QUERY = `\n[out:json][timeout:60];\narea[\"name\"=\"Nederland\"]->.nl;\n(\n  node[\"leisure\"=\"slipway\"](area.nl);\n  way[\"leisure\"=\"slipway\"](area.nl);\n);\nout center tags;\n`\n\nexport async function createBoothellingenLayer(): Promise<VectorLayer<VectorSource>> {\n  const source = new VectorSource()\n\n  const layer = new VectorLayer({\n    source,\n    style: VIS_LAYER_STYLES.trailerhellingen,\n    properties: {\n      title: 'Trailerhellingen',\n      name: 'Trailerhellingen'\n    }\n  })\n\n  try {\n    const response = await fetch('https://overpass-api.de/api/interpreter', {\n      method: 'POST',\n      body: `data=${encodeURIComponent(OVERPASS_QUERY)}`\n    })\n\n    const data = await response.json()\n\n    const features = data.elements\n      .filter((el: any) => el.lat && el.lon || el.center)\n      .map((el: any) => {\n        const tags = el.tags || {}\n        return {\n          type: 'Feature',\n          geometry: {\n            type: 'Point',\n            coordinates: [\n              el.lon || el.center?.lon,\n              el.lat || el.center?.lat\n            ]\n          },\n          properties: {\n            layerType: 'trailerhelling',\n            id: el.id,\n            name: tags.name || null,\n            access: tags.access || null,\n            fee: tags.fee || null,\n            surface: tags.surface || null,\n            operator: tags.operator || null,\n            website: tags.website || tags['contact:website'] || null,\n            description: tags.description || null,\n            opening_hours: tags.opening_hours || null,\n            capacity: tags.capacity || null,\n            boat: tags.boat || tags['seamark:small_craft_facility:category'] || null\n          }\n        }\n      })\n\n    const geojson = {\n      type: 'FeatureCollection',\n      features\n    }\n\n    source.addFeatures(\n      new GeoJSON().readFeatures(geojson, {\n        featureProjection: 'EPSG:3857'\n      })\n    )\n\n    console.log(`Loaded ${features.length} trailerhellingen`)\n  } catch (error) {\n    console.error('Failed to load trailerhellingen:', error)\n  }\n\n  return layer\n}\n"],"names":["OVERPASS_QUERY","createBoothellingenLayer","source","VectorSource","layer","VectorLayer","VIS_LAYER_STYLES","features","el","tags","geojson","GeoJSON","error"],"mappings":"sIAMA,MAAMA,EAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUvB,eAAsBC,GAA+D,CACnF,MAAMC,EAAS,IAAIC,EAEbC,EAAQ,IAAIC,EAAY,CAC5B,OAAAH,EACA,MAAOI,EAAiB,iBACxB,WAAY,CACV,MAAO,mBACP,KAAM,kBAAA,CACR,CACD,EAED,GAAI,CAQF,MAAMC,GAFO,MALI,MAAM,MAAM,0CAA2C,CACtE,OAAQ,OACR,KAAM,QAAQ,mBAAmBP,CAAc,CAAC,EAAA,CACjD,GAE2B,KAAA,GAEN,SACnB,OAAQQ,GAAYA,EAAG,KAAOA,EAAG,KAAOA,EAAG,MAAM,EACjD,IAAKA,GAAY,CAChB,MAAMC,EAAOD,EAAG,MAAQ,CAAA,EACxB,MAAO,CACL,KAAM,UACN,SAAU,CACR,KAAM,QACN,YAAa,CACXA,EAAG,KAAOA,EAAG,QAAQ,IACrBA,EAAG,KAAOA,EAAG,QAAQ,GAAA,CACvB,EAEF,WAAY,CACV,UAAW,iBACX,GAAIA,EAAG,GACP,KAAMC,EAAK,MAAQ,KACnB,OAAQA,EAAK,QAAU,KACvB,IAAKA,EAAK,KAAO,KACjB,QAASA,EAAK,SAAW,KACzB,SAAUA,EAAK,UAAY,KAC3B,QAASA,EAAK,SAAWA,EAAK,iBAAiB,GAAK,KACpD,YAAaA,EAAK,aAAe,KACjC,cAAeA,EAAK,eAAiB,KACrC,SAAUA,EAAK,UAAY,KAC3B,KAAMA,EAAK,MAAQA,EAAK,uCAAuC,GAAK,IAAA,CACtE,CAEJ,CAAC,EAEGC,EAAU,CACd,KAAM,oBACN,SAAAH,CAAA,EAGFL,EAAO,YACL,IAAIS,EAAA,EAAU,aAAaD,EAAS,CAClC,kBAAmB,WAAA,CACpB,CAAA,EAGH,QAAQ,IAAI,UAAUH,EAAS,MAAM,mBAAmB,CAC1D,OAASK,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,CACzD,CAEA,OAAOR,CACT"}