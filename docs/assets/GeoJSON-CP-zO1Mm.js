import{l as M,n as c,o as C,p as K,q as H,s as $,u as W,v as b,w as N,x as X,y as Z,z,A as Y,G as B,B as Q,D as q,E as V,H as tt,I as et,J as it,K as st,L as rt,M as nt,N as ot,O as at,P as lt,Q as A,R as ht,U as w,W as dt,X as ut,Y as ft,Z as gt,_ as ct,$ as R,a0 as yt,a1 as mt,a2 as pt,a3 as T,a4 as Ct,a5 as S,a6 as _t,a7 as I,a8 as k,a9 as J,f,aa as d,ab as Pt,ac as Ft,ad as Gt,ae as Mt,af as Ot,ag as m}from"./index-BId_6pJ6.js";class y extends M{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){c(this.flatCoordinates,t),this.changed()}clone(){const t=new y(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<C(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(K(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),H(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,s))}forEachSegment(t){return $(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,W(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return b(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return N(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return X(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Z(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new y(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return z(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Y(this.flatCoordinates,0,t,this.stride),this.changed()}}class P extends B{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Q),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,i=t.length;e<i;++e)this.changeEventsKeys_.push(q(t[e],V.CHANGE,this.changed,this))}clone(){const t=new P(j(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<C(this.getExtent(),t,e))return s;const n=this.geometries_;for(let o=0,a=n.length;o<a;++o)s=n[o].closestPointXY(t,e,i,s);return s}containsXY(t,e){const i=this.geometries_;for(let s=0,n=i.length;s<n;++s)if(i[s].containsXY(t,e))return!0;return!1}computeExtent(t){tt(t);const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)et(t,e[i].getExtent());return t}getGeometries(){return j(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let s=!1;for(let n=0,o=i.length;n<o;++n){const a=i[n],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(s=!0)}return s?new P(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const i=this.geometries_;for(let s=0,n=i.length;s<n;++s)i[s].rotate(t,e);this.changed()}scale(t,e,i){i||(i=it(this.getExtent()));const s=this.geometries_;for(let n=0,o=s.length;n<o;++n)s[n].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(j(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let s=0,n=i.length;s<n;++s)i[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function j(r){return r.map(t=>t.clone())}class F extends M{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{const s=t,n=[],o=[];for(let l=0,h=s.length;l<h;++l){const u=s[l];c(n,u.getFlatCoordinates()),o.push(n.length)}const a=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(a,n),this.ends_=o}}appendLineString(t){c(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new F(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<C(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(st(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rt(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,s))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,nt(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return ot(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new y(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,s=[];let n=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],h=new y(t.slice(n,l),i);s.push(h),n=l}return s}getLength(){const t=this.ends_;let e=0,i=0;for(let s=0,n=t.length;s<n;++s)i+=X(this.flatCoordinates,e,t[s],this.stride),e=t[s];return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const s=this.ends_,n=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],h=N(e,i,l,n,.5);c(t,h),i=l}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=at(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new F(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return lt(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=A(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class O extends M{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){c(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new O(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<C(this.getExtent(),t,e))return s;const n=this.flatCoordinates,o=this.stride;for(let a=0,l=n.length;a<l;a+=o){const h=ht(t,e,n[a],n[a+1]);if(h<s){s=h;for(let u=0;u<o;++u)i[u]=n[a+u];i.length=o}}return s}getCoordinates(){return b(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new w(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,s=[];for(let n=0,o=t.length;n<o;n+=i){const a=new w(t.slice(n,n+i),e);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let s=0,n=e.length;s<n;s+=i){const o=e[s],a=e[s+1];if(dt(t,o,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Y(this.flatCoordinates,0,t,this.stride),this.changed()}}class G extends M{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){const s=t,n=[],o=[];for(let a=0,l=s.length;a<l;++a){const h=s[a],u=n.length,g=h.getEnds();for(let p=0,U=g.length;p<U;++p)g[p]+=u;c(n,h.getFlatCoordinates()),o.push(g)}e=s.length===0?this.getLayout():s[0].getLayout(),t=n,i=o}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;c(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,n=e.length;s<n;++s)e[s]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const i=new G(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,s){return s<C(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ut(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ft(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return gt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return ct(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),R(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,yt(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=mt(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=pt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new O(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;T(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=R(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Ct(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new G(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const i=this.endss_[t].slice(),s=i[i.length-1];if(e!==0)for(let n=0,o=i.length;n<o;++n)i[n]-=e;return new S(this.flatCoordinates.slice(e,s),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[];let n=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),h=l[l.length-1];if(n!==0)for(let g=0,p=l.length;g<p;++g)l[g]-=n;const u=new S(e.slice(n,h),t,l);s.push(u),n=h}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return _t(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=I(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}class jt{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=J,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?f(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=f(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return d()}readFeature(t,e){return d()}readFeatures(t,e){return d()}readGeometry(t,e){return d()}readProjection(t){return d()}writeFeature(t,e){return d()}writeFeatures(t,e){return d()}writeGeometry(t,e){return d()}}function v(r,t,e){const i=e?f(e.featureProjection):null,s=e?f(e.dataProjection):null;let n=r;if(i&&s&&!Pt(i,s)){t&&(n=r.clone());const o=t?i:s,a=t?s:i;o.getUnits()==="tile-pixels"?n.transform(o,a):n.applyTransform(Ft(o,a))}if(t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),a=function(l){for(let h=0,u=l.length;h<u;++h)l[h]=Math.round(l[h]*o)/o;return l};n===r&&(n=r.clone()),n.applyTransform(a)}return n}const wt={Point:w,LineString:y,Polygon:S,MultiPoint:O,MultiLineString:F,MultiPolygon:G};function Rt(r,t,e){return Array.isArray(t[0])?(T(r,0,t,e)||(r=r.slice(),R(r,0,t,e)),r):(Gt(r,0,t,e)||(r=r.slice(),Mt(r,0,t,e)),r)}function D(r,t){const e=r.geometry;if(!e)return[];if(Array.isArray(e))return e.map(n=>D({...r,geometry:n})).flat();const i=e.type==="MultiPolygon"?"Polygon":e.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const s=e.layout.length;return v(new k(i,i==="Polygon"?Rt(e.flatCoordinates,e.ends,s):e.flatCoordinates,e.ends?.flat(),s,r.properties||{},r.id).enableSimplifyTransformed(),!1,t)}function x(r,t){if(!r)return null;if(Array.isArray(r)){const i=r.map(s=>x(s,t));return new P(i)}const e=wt[r.type];return v(new e(r.flatCoordinates,r.layout||"XY",r.ends),!1,t)}class St extends jt{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(_(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(_(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return d()}readFeaturesFromObject(t,e){return d()}readGeometry(t,e){return this.readGeometryFromObject(_(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return d()}readProjection(t){return this.readProjectionFromObject(_(t))}readProjectionFromObject(t){return d()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return d()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return d()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return d()}}function _(r){if(typeof r=="string"){const t=JSON.parse(r);return t||null}return r!==null?r:null}class Ht extends St{constructor(t){t=t||{},super(),this.dataProjection=f(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=f(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const s=L(i.geometry);if(this.featureClass===k)return D({geometry:s,id:i.id,properties:i.properties},e);const n=new J;return this.geometryName_?n.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&n.setGeometryName(i.geometry_name),n.setGeometry(x(s,e)),"id"in i&&n.setId(i.id),i.properties&&n.setProperties(i.properties,!0),n}readFeaturesFromObject(t,e){const i=t;let s=null;if(i.type==="FeatureCollection"){const n=t;s=[];const o=n.features;for(let a=0,l=o.length;a<l;++a){const h=this.readFeatureFromObject(o[a],e);h&&s.push(h)}}else s=[this.readFeatureFromObject(t,e)];return s.flat()}readGeometryFromObject(t,e){return Et(t,e)}readProjectionFromObject(t){const e=t.crs;let i;if(e)if(e.type=="name")i=f(e.properties.name);else if(e.type==="EPSG")i=f("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(i.id=s),!t.hasProperties())return i;const n=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=E(o,e),delete n[t.getGeometryName()]),Ot(n)||(i.properties=n),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let s=0,n=t.length;s<n;++s)i.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return E(t,this.adaptOptions(e))}}function L(r,t){if(!r)return null;let e;switch(r.type){case"Point":{e=vt(r);break}case"LineString":{e=xt(r);break}case"Polygon":{e=Xt(r);break}case"MultiPoint":{e=bt(r);break}case"MultiLineString":{e=Lt(r);break}case"MultiPolygon":{e=Nt(r);break}case"GeometryCollection":{e=At(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return e}function Et(r,t){const e=L(r);return x(e,t)}function At(r,t){return r.geometries.map(function(i){return L(i)})}function vt(r){const t=r.coordinates;return{type:"Point",flatCoordinates:t,layout:m(t.length)}}function xt(r){const t=r.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:m(t[0]?.length||2)}}function Lt(r){const t=r.coordinates,e=t[0]?.[0]?.length||2,i=[],s=A(i,0,t,e);return{type:"MultiLineString",flatCoordinates:i,ends:s,layout:m(e)}}function bt(r){const t=r.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:m(t[0]?.length||2)}}function Nt(r){const t=r.coordinates,e=[],i=t[0]?.[0]?.[0].length||2,s=I(e,0,t,i);return{type:"MultiPolygon",flatCoordinates:e,ends:s,layout:m(i)}}function Xt(r){const t=r.coordinates,e=[],i=t[0]?.[0]?.length,s=A(e,0,t,i);return{type:"Polygon",flatCoordinates:e,ends:s,layout:m(i)}}function E(r,t){r=v(r,!0,t);const e=r.getType();let i;switch(e){case"Point":{i=Dt(r);break}case"LineString":{i=Tt(r);break}case"Polygon":{i=Ut(r,t);break}case"MultiPoint":{i=kt(r);break}case"MultiLineString":{i=It(r);break}case"MultiPolygon":{i=Jt(r,t);break}case"GeometryCollection":{i=Yt(r,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return i}function Yt(r,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(i){return E(i,t)})}}function Tt(r,t){return{type:"LineString",coordinates:r.getCoordinates()}}function It(r,t){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function kt(r,t){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function Jt(r,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(e)}}function Dt(r,t){return{type:"Point",coordinates:r.getCoordinates()}}function Ut(r,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(e)}}export{Ht as G};
//# sourceMappingURL=GeoJSON-CP-zO1Mm.js.map
