{"version":3,"file":"aanlegsteigersOL-4erDpAzY.js","sources":["../../src/layers/aanlegsteigersOL.ts"],"sourcesContent":["import VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Icon, Circle, Fill, Stroke } from 'ol/style'\n\n// Overpass API query for marinas and moorings in Netherlands\nconst OVERPASS_QUERY = `\n[out:json][timeout:60];\narea[\"name\"=\"Nederland\"]->.nl;\n(\n  node[\"leisure\"=\"marina\"](area.nl);\n  node[\"mooring\"=\"yes\"](area.nl);\n  way[\"leisure\"=\"marina\"](area.nl);\n);\nout center;\n`\n\nexport async function createAanlegsteigersLayer(): Promise<VectorLayer<VectorSource>> {\n  const source = new VectorSource()\n\n  const layer = new VectorLayer({\n    source,\n    style: new Style({\n      image: new Circle({\n        radius: 8,\n        fill: new Fill({ color: '#2196F3' }),\n        stroke: new Stroke({ color: '#fff', width: 2 })\n      })\n    }),\n    properties: {\n      name: 'Aanlegsteigers'\n    }\n  })\n\n  // Fetch data from Overpass API\n  try {\n    const response = await fetch('https://overpass-api.de/api/interpreter', {\n      method: 'POST',\n      body: `data=${encodeURIComponent(OVERPASS_QUERY)}`\n    })\n\n    const data = await response.json()\n\n    // Convert to GeoJSON\n    const features = data.elements\n      .filter((el: any) => el.lat && el.lon || el.center)\n      .map((el: any) => ({\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [\n            el.lon || el.center?.lon,\n            el.lat || el.center?.lat\n          ]\n        },\n        properties: {\n          id: el.id,\n          name: el.tags?.name || 'Aanlegsteiger',\n          type: el.tags?.leisure || el.tags?.mooring || 'marina',\n          website: el.tags?.website,\n          phone: el.tags?.phone\n        }\n      }))\n\n    const geojson = {\n      type: 'FeatureCollection',\n      features\n    }\n\n    source.addFeatures(\n      new GeoJSON().readFeatures(geojson, {\n        featureProjection: 'EPSG:3857'\n      })\n    )\n\n    console.log(`Loaded ${features.length} aanlegsteigers`)\n  } catch (error) {\n    console.error('Failed to load aanlegsteigers:', error)\n  }\n\n  return layer\n}\n"],"names":["OVERPASS_QUERY","createAanlegsteigersLayer","source","VectorSource","layer","VectorLayer","Style","Circle","Fill","Stroke","features","el","geojson","GeoJSON","error"],"mappings":"qHAMA,MAAMA,EAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWvB,eAAsBC,GAAgE,CACpF,MAAMC,EAAS,IAAIC,EAEbC,EAAQ,IAAIC,EAAY,CAC5B,OAAAH,EACA,MAAO,IAAII,EAAM,CACf,MAAO,IAAIC,EAAO,CAChB,OAAQ,EACR,KAAM,IAAIC,EAAK,CAAE,MAAO,UAAW,EACnC,OAAQ,IAAIC,EAAO,CAAE,MAAO,OAAQ,MAAO,EAAG,CAAA,CAC/C,CAAA,CACF,EACD,WAAY,CACV,KAAM,gBAAA,CACR,CACD,EAGD,GAAI,CASF,MAAMC,GAHO,MALI,MAAM,MAAM,0CAA2C,CACtE,OAAQ,OACR,KAAM,QAAQ,mBAAmBV,CAAc,CAAC,EAAA,CACjD,GAE2B,KAAA,GAGN,SACnB,OAAQW,GAAYA,EAAG,KAAOA,EAAG,KAAOA,EAAG,MAAM,EACjD,IAAKA,IAAa,CACjB,KAAM,UACN,SAAU,CACR,KAAM,QACN,YAAa,CACXA,EAAG,KAAOA,EAAG,QAAQ,IACrBA,EAAG,KAAOA,EAAG,QAAQ,GAAA,CACvB,EAEF,WAAY,CACV,GAAIA,EAAG,GACP,KAAMA,EAAG,MAAM,MAAQ,gBACvB,KAAMA,EAAG,MAAM,SAAWA,EAAG,MAAM,SAAW,SAC9C,QAASA,EAAG,MAAM,QAClB,MAAOA,EAAG,MAAM,KAAA,CAClB,EACA,EAEEC,EAAU,CACd,KAAM,oBACN,SAAAF,CAAA,EAGFR,EAAO,YACL,IAAIW,EAAA,EAAU,aAAaD,EAAS,CAClC,kBAAmB,WAAA,CACpB,CAAA,EAGH,QAAQ,IAAI,UAAUF,EAAS,MAAM,iBAAiB,CACxD,OAASI,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CACvD,CAEA,OAAOV,CACT"}